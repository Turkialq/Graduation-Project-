// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Student {
  id                  Int               @id @default(autoincrement())
  name                String
  gpa                 Float
  interest            String
  supervisor          StudentSupervisor @relation(fields: [studentSupervisor], references: [id])
  studentSupervisor   Int
  companySupervisor   CompanySupervisor @relation(fields: [companySupervisorId], references: [id])
  companySupervisorId Int
  admin               UniversityAdmin   @relation(fields: [universityAdminId], references: [id])
  universityAdminId   Int
  company             Company           @relation(fields: [companyId], references: [id])
  companyId           Int
  university          University        @relation(fields: [universityId], references: [id])
  universityId        Int
  submitions          Submissions       @relation(fields: [submissionsId], references: [id])
  submissionsId       Int               @unique
  weeklyStatus        WeeklyStatus      @relation(fields: [weeklyStatusId], references: [id])
  weeklyStatusId      Int               @unique
}

model StudentSupervisor {
  id              Int             @id @default(autoincrement())
  name            String
  admin           UniversityAdmin @relation(fields: [universityAdmin], references: [id])
  universityAdmin Int
  weeklyStatus    WeeklyStatus    @relation(fields: [weeklyStatusId], references: [id])
  weeklyStatusId  Int             @unique
  Student         Student[]
}

model CompanySupervisor {
  id        Int       @id @default(autoincrement())
  name      String
  company   Company   @relation(fields: [companyId], references: [id])
  companyId Int
  Student   Student[]
}

model UniversityAdmin {
  id                Int                 @id @default(autoincrement())
  name              String
  univeristy        University          @relation(fields: [universityId], references: [id])
  universityId      Int
  StudentSupervisor StudentSupervisor[]
  Student           Student[]
}

model Company {
  id                Int                 @id @default(autoincrement())
  name              String              @unique
  type              String
  field             String
  location          String
  CompanySupervisor CompanySupervisor[]
  Student           Student[]
  sumbmitions       Submissions         @relation(fields: [submissionsId], references: [id])
  submissionsId     Int                 @unique
}

model University {
  id              Int               @id @default(autoincrement())
  name            String            @unique
  UniversityAdmin UniversityAdmin[]
  Student         Student[]
}

model Submissions {
  id               Int      @id @default(autoincrement())
  status           String
  timeOfSubmission DateTime @default(now())
  Student          Student?
  Company          Company?
}

model WeeklyStatus {
  id                Int                @id @default(autoincrement())
  filePath          String
  grande            Int
  Student           Student?
  StudentSupervisor StudentSupervisor?
}
